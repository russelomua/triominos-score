!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{ekgB:function(t,i,o){"use strict";o.r(i),o.d(i,"GamePageModule",function(){return w});var a=o("ofXK"),r=o("3Pt+"),b=o("TEn/"),c=o("tyNb"),l=o("mrSG"),s=o("S8cZ"),u=o("pLZG"),f=o("SfAt"),g=o("fXoL"),d=o("o0su");function v(e,n){if(1&e){var t=g.Lb();g.Kb(0,"ion-buttons",4),g.Kb(1,"ion-button",6),g.Sb("click",function(){return g.cc(t),g.Ub().addPlayer()}),g.Ib(2,"ion-icon",7),g.Jb(),g.Jb()}}function m(e,n){if(1&e&&(g.Kb(0,"ion-item"),g.Ib(1,"ion-icon",8),g.Kb(2,"ion-label"),g.hc(3),g.Ib(4,"br"),g.Kb(5,"strong"),g.hc(6,"Score:"),g.Jb(),g.hc(7),g.Kb(8,"strong"),g.hc(9,"Tiles:"),g.Jb(),g.hc(10),g.Jb(),g.Jb()),2&e){var t=n.$implicit,i=g.Ub();g.xb(3),g.kc(" ",t.getName()," ",i.getCurrentPlayer(t),""),g.xb(4),g.jc(" ",t.getScore()," "),g.xb(3),g.jc(" ",t.getTiles()," ")}}function h(e,n){1&e&&(g.Kb(0,"div"),g.hc(1," To start a game add from 2 to 4 players "),g.Jb())}function p(e,n){if(1&e){var t=g.Lb();g.Kb(0,"div",10),g.Kb(1,"div"),g.hc(2,"Add more players or"),g.Jb(),g.Kb(3,"ion-button",11),g.Sb("click",function(){return g.cc(t),g.Ub(2).gameService.startGame()}),g.hc(4," Start game "),g.Jb(),g.Jb()}}function y(e,n){if(1&e&&(g.Kb(0,"ion-card"),g.Kb(1,"ion-card-content"),g.fc(2,h,2,0,"div",3),g.fc(3,p,5,0,"div",9),g.Jb(),g.Jb()),2&e){var t=g.Ub();g.xb(2),g.Zb("ngIf",!t.gameService.canStartGame()),g.xb(1),g.Zb("ngIf",t.gameService.canStartGame())}}function J(e,n){if(1&e){var t=g.Lb();g.Kb(0,"ion-item"),g.Kb(1,"ion-label",12),g.hc(2,"Tiles score"),g.Jb(),g.Kb(3,"ion-input",15),g.Sb("ngModelChange",function(e){return g.cc(t),g.Ub(2).tilesScore=e}),g.Jb(),g.Jb()}if(2&e){var i=g.Ub(2);g.xb(3),g.Zb("ngModel",i.tilesScore)}}function K(e,n){if(1&e&&(g.Kb(0,"ion-select-option",17),g.hc(1),g.Jb()),2&e){var t=n.$implicit;g.Zb("value",t.value),g.xb(1),g.ic(t.label)}}function S(e,n){if(1&e){var t=g.Lb();g.Kb(0,"ion-item"),g.Kb(1,"ion-label"),g.hc(2,"Bonus"),g.Jb(),g.Kb(3,"ion-select",14),g.Sb("ngModelChange",function(e){return g.cc(t),g.Ub(2).bonus=e}),g.fc(4,K,2,2,"ion-select-option",16),g.Jb(),g.Jb()}if(2&e){var i=g.Ub(2);g.xb(3),g.Zb("ngModel",i.bonus),g.xb(1),g.Zb("ngForOf",i.bonusList)}}function x(e,n){if(1&e){var t=g.Lb();g.Kb(0,"ion-card"),g.Kb(1,"ion-list"),g.Kb(2,"ion-item"),g.Kb(3,"ion-label",12),g.hc(4,"Picked tiles"),g.Jb(),g.Kb(5,"ion-input",13),g.Sb("ngModelChange",function(e){return g.cc(t),g.Ub().tilesPicked=e}),g.Jb(),g.Jb(),g.Kb(6,"ion-item"),g.Kb(7,"ion-label"),g.hc(8,"Is Tile Placed"),g.Jb(),g.Kb(9,"ion-toggle",14),g.Sb("ngModelChange",function(e){return g.cc(t),g.Ub().isTilesPlaced=e}),g.Jb(),g.Jb(),g.fc(10,J,4,1,"ion-item",3),g.fc(11,S,5,2,"ion-item",3),g.Jb(),g.Jb()}if(2&e){var i=g.Ub();g.xb(5),g.Zb("ngModel",i.tilesPicked),g.xb(4),g.Zb("ngModel",i.isTilesPlaced),g.xb(1),g.Zb("ngIf",i.isTilesPlaced),g.xb(1),g.Zb("ngIf",i.isTilesPlaced)}}function k(e,n){if(1&e){var t=g.Lb();g.Kb(0,"ion-button",18),g.Sb("click",function(){return g.cc(t),g.Ub().nextPlayer()}),g.hc(1," Next player "),g.Jb()}}var P,I,G,T=[{path:"",component:(P=function(){function t(n,i,o){e(this,t),this.modalController=n,this.gameService=i,this.router=o,this.bonusList=[{value:null,label:"None"},{value:s.a.BRIDGE,label:"Bridge"},{value:s.a.HEXAGON,label:"Hexagon"},{value:s.a.DOUBLE_HEXAGON,label:"2 Hexagon"},{value:s.a.TRIPLE_HEXAGON,label:"3 Hexagon"}]}var i,o,a;return i=t,(o=[{key:"ngOnInit",value:function(){var e=this;this.saveGameSubscription=this.router.events.pipe(Object(u.a)(function(e){return e instanceof c.c})).subscribe(function(n){e.gameService.saveGame()})}},{key:"ngOnDestroy",value:function(){this.saveGameSubscription.unsubscribe()}},{key:"getBonusText",value:function(e){var n=this.bonusList.filter(function(n){return n.value===e});return 1===n.length?n[0].label:""}},{key:"addPlayer",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n,t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalController.create({component:f.a});case 2:return(n=e.sent).onDidDismiss().then(function(e){console.log(e.data.player,e.data.player instanceof s.c),e.data.player instanceof s.c&&t.gameService.addPlayer(e.data.player)}),e.next=6,n.present();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}))}},{key:"nextPlayer",value:function(){var e,n=parseInt(this.tilesScore,10),t=parseInt(this.tilesPicked,10),i=1===(null===(e=this.bonus)||void 0===e?void 0:e.length)?this.bonus[0].value:null;this.gameService.getGame().endTurn(isNaN(n)?0:n,isNaN(t)?0:t,!!this.isTilesPlaced,i),this.tilesScore=null,this.tilesPicked=null,this.isTilesPlaced=!1,this.bonus=null}},{key:"getCurrentPlayer",value:function(e){return this.gameService.isCurrentPlayer(e)?"current":""}},{key:"getPlayers",value:function(){var e;return null===(e=this.gameService.getGame())||void 0===e?void 0:e.playersBag.players()}}])&&n(i.prototype,o),a&&n(i,a),t}(),P.\u0275fac=function(e){return new(e||P)(g.Hb(b.A),g.Hb(d.a),g.Hb(c.g))},P.\u0275cmp=g.Bb({type:P,selectors:[["app-game"]],decls:17,vars:5,consts:[["slot","start"],["slot","end",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],["slot","end"],["type","info",3,"click",4,"ngIf"],["type","primary",3,"click"],["name","person-add"],["slot","start","name","person-outline"],["class","ion-text-center",4,"ngIf"],[1,"ion-text-center"],["type","success",3,"click"],["position","fixed"],["type","number","max","3","min","0",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["type","number","max","15","min","0",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","info",3,"click"]],template:function(e,n){1&e&&(g.Kb(0,"ion-header"),g.Kb(1,"ion-toolbar"),g.Kb(2,"ion-buttons",0),g.Ib(3,"ion-back-button"),g.Jb(),g.Kb(4,"ion-title"),g.hc(5,"Triominos game"),g.Jb(),g.fc(6,v,3,0,"ion-buttons",1),g.Jb(),g.Jb(),g.Kb(7,"ion-content"),g.Kb(8,"ion-card"),g.Kb(9,"ion-list"),g.fc(10,m,11,4,"ion-item",2),g.Jb(),g.Jb(),g.fc(11,y,4,2,"ion-card",3),g.fc(12,x,12,4,"ion-card",3),g.Jb(),g.Kb(13,"ion-footer"),g.Kb(14,"ion-toolbar"),g.Kb(15,"ion-buttons",4),g.fc(16,k,2,0,"ion-button",5),g.Jb(),g.Jb(),g.Jb()),2&e&&(g.xb(6),g.Zb("ngIf",!n.gameService.getGame().isStarted()),g.xb(4),g.Zb("ngForOf",n.gameService.getPlayers()),g.xb(1),g.Zb("ngIf",!n.gameService.getGame().isStarted()),g.xb(1),g.Zb("ngIf",n.gameService.getGame().isStarted()),g.xb(4),g.Zb("ngIf",n.gameService.getGame().isStarted()))},directives:[b.k,b.x,b.f,b.c,b.d,b.v,a.j,b.i,b.g,b.q,a.i,b.j,b.e,b.l,b.n,b.p,b.h,b.m,b.B,r.d,r.e,b.w,b.a,b.t,b.D,b.u],styles:[""]}),P)}],Z=((G=function n(){e(this,n)}).\u0275mod=g.Fb({type:G}),G.\u0275inj=g.Eb({factory:function(e){return new(e||G)},imports:[[c.i.forChild(T)],c.i]}),G),w=((I=function n(){e(this,n)}).\u0275mod=g.Fb({type:I}),I.\u0275inj=g.Eb({factory:function(e){return new(e||I)},imports:[[a.b,r.a,b.y,Z]]}),I)}}])}();