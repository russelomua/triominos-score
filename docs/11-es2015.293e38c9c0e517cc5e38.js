(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{ekgB:function(e,n,t){"use strict";t.r(n),t.d(n,"GamePageModule",function(){return I});var i=t("ofXK"),o=t("3Pt+"),b=t("TEn/"),c=t("tyNb"),a=t("mrSG"),s=t("S8cZ"),r=t("pLZG"),l=t("SfAt"),u=t("fXoL"),g=t("o0su");function d(e,n){if(1&e){const e=u.Lb();u.Kb(0,"ion-buttons",4),u.Kb(1,"ion-button",6),u.Sb("click",function(){return u.cc(e),u.Ub().addPlayer()}),u.Ib(2,"ion-icon",7),u.Jb(),u.Jb()}}function f(e,n){if(1&e&&(u.Kb(0,"ion-item"),u.Ib(1,"ion-icon",8),u.Kb(2,"ion-label"),u.hc(3),u.Ib(4,"br"),u.Kb(5,"strong"),u.hc(6,"Score:"),u.Jb(),u.hc(7),u.Kb(8,"strong"),u.hc(9,"Tiles:"),u.Jb(),u.hc(10),u.Jb(),u.Jb()),2&e){const e=n.$implicit,t=u.Ub();u.xb(3),u.kc(" ",e.getName()," ",t.getCurrentPlayer(e),""),u.xb(4),u.jc(" ",e.getScore()," "),u.xb(3),u.jc(" ",e.getTiles()," ")}}function m(e,n){1&e&&(u.Kb(0,"div"),u.hc(1," To start a game add from 2 to 4 players "),u.Jb())}function h(e,n){if(1&e){const e=u.Lb();u.Kb(0,"div",10),u.Kb(1,"div"),u.hc(2,"Add more players or"),u.Jb(),u.Kb(3,"ion-button",11),u.Sb("click",function(){return u.cc(e),u.Ub(2).gameService.startGame()}),u.hc(4," Start game "),u.Jb(),u.Jb()}}function p(e,n){if(1&e&&(u.Kb(0,"ion-card"),u.Kb(1,"ion-card-content"),u.fc(2,m,2,0,"div",3),u.fc(3,h,5,0,"div",9),u.Jb(),u.Jb()),2&e){const e=u.Ub();u.xb(2),u.Zb("ngIf",!e.gameService.canStartGame()),u.xb(1),u.Zb("ngIf",e.gameService.canStartGame())}}function v(e,n){if(1&e){const e=u.Lb();u.Kb(0,"ion-item"),u.Kb(1,"ion-label",12),u.hc(2,"Tiles score"),u.Jb(),u.Kb(3,"ion-input",15),u.Sb("ngModelChange",function(n){return u.cc(e),u.Ub(2).tilesScore=n}),u.Jb(),u.Jb()}if(2&e){const e=u.Ub(2);u.xb(3),u.Zb("ngModel",e.tilesScore)}}function J(e,n){if(1&e&&(u.Kb(0,"ion-select-option",17),u.hc(1),u.Jb()),2&e){const e=n.$implicit;u.Zb("value",e.value),u.xb(1),u.ic(e.label)}}function K(e,n){if(1&e){const e=u.Lb();u.Kb(0,"ion-item"),u.Kb(1,"ion-label"),u.hc(2,"Bonus"),u.Jb(),u.Kb(3,"ion-select",14),u.Sb("ngModelChange",function(n){return u.cc(e),u.Ub(2).bonus=n}),u.fc(4,J,2,2,"ion-select-option",16),u.Jb(),u.Jb()}if(2&e){const e=u.Ub(2);u.xb(3),u.Zb("ngModel",e.bonus),u.xb(1),u.Zb("ngForOf",e.bonusList)}}function S(e,n){if(1&e){const e=u.Lb();u.Kb(0,"ion-card"),u.Kb(1,"ion-list"),u.Kb(2,"ion-item"),u.Kb(3,"ion-label",12),u.hc(4,"Picked tiles"),u.Jb(),u.Kb(5,"ion-input",13),u.Sb("ngModelChange",function(n){return u.cc(e),u.Ub().tilesPicked=n}),u.Jb(),u.Jb(),u.Kb(6,"ion-item"),u.Kb(7,"ion-label"),u.hc(8,"Is Tile Placed"),u.Jb(),u.Kb(9,"ion-toggle",14),u.Sb("ngModelChange",function(n){return u.cc(e),u.Ub().isTilesPlaced=n}),u.Jb(),u.Jb(),u.fc(10,v,4,1,"ion-item",3),u.fc(11,K,5,2,"ion-item",3),u.Jb(),u.Jb()}if(2&e){const e=u.Ub();u.xb(5),u.Zb("ngModel",e.tilesPicked),u.xb(4),u.Zb("ngModel",e.isTilesPlaced),u.xb(1),u.Zb("ngIf",e.isTilesPlaced),u.xb(1),u.Zb("ngIf",e.isTilesPlaced)}}function y(e,n){if(1&e){const e=u.Lb();u.Kb(0,"ion-button",18),u.Sb("click",function(){return u.cc(e),u.Ub().nextPlayer()}),u.hc(1," Next player "),u.Jb()}}const x=[{path:"",component:(()=>{class e{constructor(e,n,t){this.modalController=e,this.gameService=n,this.router=t,this.bonusList=[{value:null,label:"None"},{value:s.a.BRIDGE,label:"Bridge"},{value:s.a.HEXAGON,label:"Hexagon"},{value:s.a.DOUBLE_HEXAGON,label:"2 Hexagon"},{value:s.a.TRIPLE_HEXAGON,label:"3 Hexagon"}]}ngOnInit(){this.saveGameSubscription=this.router.events.pipe(Object(r.a)(e=>e instanceof c.c)).subscribe(e=>{this.gameService.saveGame()})}ngOnDestroy(){this.saveGameSubscription.unsubscribe()}getBonusText(e){const n=this.bonusList.filter(n=>n.value===e);return 1===n.length?n[0].label:""}addPlayer(){return Object(a.a)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:l.a});return e.onDidDismiss().then(e=>{console.log(e.data.player,e.data.player instanceof s.c),e.data.player instanceof s.c&&this.gameService.addPlayer(e.data.player)}),yield e.present()})}nextPlayer(){var e;const n=parseInt(this.tilesScore,10),t=parseInt(this.tilesPicked,10),i=1===(null===(e=this.bonus)||void 0===e?void 0:e.length)?this.bonus[0].value:null;this.gameService.getGame().endTurn(isNaN(n)?0:n,isNaN(t)?0:t,!!this.isTilesPlaced,i),this.tilesScore=null,this.tilesPicked=null,this.isTilesPlaced=!1,this.bonus=null}getCurrentPlayer(e){return this.gameService.isCurrentPlayer(e)?"current":""}getPlayers(){var e;return null===(e=this.gameService.getGame())||void 0===e?void 0:e.playersBag.players()}}return e.\u0275fac=function(n){return new(n||e)(u.Hb(b.A),u.Hb(g.a),u.Hb(c.g))},e.\u0275cmp=u.Bb({type:e,selectors:[["app-game"]],decls:17,vars:5,consts:[["slot","start"],["slot","end",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],["slot","end"],["type","info",3,"click",4,"ngIf"],["type","primary",3,"click"],["name","person-add"],["slot","start","name","person-outline"],["class","ion-text-center",4,"ngIf"],[1,"ion-text-center"],["type","success",3,"click"],["position","fixed"],["type","number","max","3","min","0",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["type","number","max","15","min","0",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","info",3,"click"]],template:function(e,n){1&e&&(u.Kb(0,"ion-header"),u.Kb(1,"ion-toolbar"),u.Kb(2,"ion-buttons",0),u.Ib(3,"ion-back-button"),u.Jb(),u.Kb(4,"ion-title"),u.hc(5,"Triominos game"),u.Jb(),u.fc(6,d,3,0,"ion-buttons",1),u.Jb(),u.Jb(),u.Kb(7,"ion-content"),u.Kb(8,"ion-card"),u.Kb(9,"ion-list"),u.fc(10,f,11,4,"ion-item",2),u.Jb(),u.Jb(),u.fc(11,p,4,2,"ion-card",3),u.fc(12,S,12,4,"ion-card",3),u.Jb(),u.Kb(13,"ion-footer"),u.Kb(14,"ion-toolbar"),u.Kb(15,"ion-buttons",4),u.fc(16,y,2,0,"ion-button",5),u.Jb(),u.Jb(),u.Jb()),2&e&&(u.xb(6),u.Zb("ngIf",!n.gameService.getGame().isStarted()),u.xb(4),u.Zb("ngForOf",n.gameService.getPlayers()),u.xb(1),u.Zb("ngIf",!n.gameService.getGame().isStarted()),u.xb(1),u.Zb("ngIf",n.gameService.getGame().isStarted()),u.xb(4),u.Zb("ngIf",n.gameService.getGame().isStarted()))},directives:[b.k,b.x,b.f,b.c,b.d,b.v,i.j,b.i,b.g,b.q,i.i,b.j,b.e,b.l,b.n,b.p,b.h,b.m,b.B,o.d,o.e,b.w,b.a,b.t,b.D,b.u],styles:[""]}),e})()}];let P=(()=>{class e{}return e.\u0275mod=u.Fb({type:e}),e.\u0275inj=u.Eb({factory:function(n){return new(n||e)},imports:[[c.i.forChild(x)],c.i]}),e})(),I=(()=>{class e{}return e.\u0275mod=u.Fb({type:e}),e.\u0275inj=u.Eb({factory:function(n){return new(n||e)},imports:[[i.b,o.a,b.y,P]]}),e})()}}]);